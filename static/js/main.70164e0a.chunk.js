(this.webpackJsonpbisdash=this.webpackJsonpbisdash||[]).push([[0],{111:function(e,t,a){e.exports=a(117)},116:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(55),i=a.n(s),o=(a(116),a(2)),l=a(3),c=a(5),u=a(4),p=(a(54),a(7)),d=a(1),m=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).createBarChart=r.createBarChart.bind(Object(p.a)(r)),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.createBarChart()}},{key:"componentDidUpdate",value:function(){this.createBarChart()}},{key:"createBarChart",value:function(){var e=this,t={};Object.keys(this.props.params).map((function(a){t[a]=e.props.params[a].options.filter((function(e){return 1==e.isChecked}))}));var a=this.props.data.filter((function(a){return Object.keys(t).every((function(r){return t[r].map((function(e){return e.name})).includes(a[e.props.params[r].longName])}))})),r=this.props.axisFields.xName,n=this.props.axisFields.yName,s=this.node,i=30,o=90,l=d.f(a.map((function(e){return e[r]}))),c=d.f(a.map((function(e){return e[n]}))),u=d.g(a.map((function(e){return e[r]}))),p=d.g(a.map((function(e){return e[n]}))),m=Object.keys(t).reduce((function(e,a){return e*t[a].length}),1),h=d.i().domain([1,m]).interpolator(d.d);d.k(s).selectAll("svg > *").remove(),d.k(s).attr("tranform","translate("+o+", "+i+")");var f=d.j().domain([u,l]).range([0,400]);d.k(s).append("g").attr("class","xaxis").attr("transform","translate("+o+", "+(i+400)+")").call(d.a(f)),d.k(s).selectAll(".xaxis text").attr("transform",(function(e){return"translate("+-2*this.getBBox().height+","+this.getBBox().height+")rotate(-45)"}));var v=d.h().domain([p,c]).range([400,0]);d.k(s).append("g").attr("class","yaxis").attr("transform","translate("+o+", "+i+")").call(d.b(v)),d.k(s).append("g").append("text").attr("class","yaxis-label").attr("text-anchor","end").attr("transform","translate("+(o-70)+",150)rotate(-90)").text(this.props.unitMeasure+", "+this.props.unit);var b=d.e().x((function(e){return f(e[r])})).y((function(e){return v(e[n])})).curve(d.c);var O=[{}];Object.keys(t).map((function(e){O=function(e,t,a){var r=[];return e.forEach((function(e){t.forEach((function(t){var n=Object.assign({},e);n[a]=t,r.push(n)}))})),r}(O,t[e],e)}));var C=1;O.map((function(t){var r=a.filter((function(a){return Object.keys(t).every((function(r){return t[r].name==a[e.props.params[r].longName]}))}));if(r.length>0){var l=b(r),c=d.k(s).append("g").attr("class","item");c.append("path").attr("d",l).attr("transform","translate("+o+", "+i+")").attr("stroke",h(C)).attr("stroke-width","2").attr("fill","none");var u=r[r.length-1],p=Object.keys(t).reduce((function(e,a){return e+"<br>"+t[a].name}),"");c.append("foreignObject").attr("transform","translate("+(400+o+30)+","+(v(u[n])-30)+")").attr("width","300").attr("height","300").append("xhtml:div").html('<p class="line-label">'+p+"</p>")}C+=1}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"graph"},n.a.createElement("div",null,n.a.createElement("h3",{className:"chart-title"},this.props.name+(this.props.unitType.length>0?" ("+this.props.unitType+")":"")),n.a.createElement("svg",{ref:function(t){return e.node=t},width:800,height:500})))}}]),a}(n.a.Component),h=function(e){return n.a.createElement("li",{className:"option-list-item",onClick:function(){return e.handleCheckChildElement()}},n.a.createElement("div",{className:"item-checkbox"},n.a.createElement("input",{key:e.id,type:"checkbox",checked:e.isChecked,name:e.name}),n.a.createElement("div",{className:"checkmark"})),n.a.createElement("div",{className:"item-text"},n.a.createElement("label",null,e.name)))},f=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleKeyUp=r.handleKeyUp.bind(Object(p.a)(r)),r}return Object(l.a)(a,[{key:"handleKeyUp",value:function(e){var t=e.target.value.split("-").join("");t.length>4&&(t=t.slice(0,4)+"-"+t.slice(4)),t.length>7&&(t=t.slice(0,7)+"-"+t.slice(7)),t.length>10&&(t=t.slice(0,10)),e.target.value=t}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"drawer-date"},n.a.createElement("label",{className:"drawer-date-text"},"Start:",n.a.createElement("input",{onKeyUp:this.handleKeyUp,autocomplete:"off",className:"drawer-date-input",type:"text",placeholder:this.props.start,name:"start",onChange:this.props.handleDateChange}))),n.a.createElement("div",{className:"drawer-date"},n.a.createElement("label",{className:"drawer-date-text"},"End:",n.a.createElement("input",{onKeyUp:this.handleKeyUp,autocomplete:"off",className:"drawer-date-input",type:"text",placeholder:this.props.end,name:"end",onChange:this.props.handleDateChange}))),n.a.createElement("div",{className:"drawer-submit"},n.a.createElement("div",{className:"drawer-submit-button",onClick:this.props.handleDateSubmit},n.a.createElement("label",{className:"drawer-date-text"},"Reload"))))}}]),a}(n.a.Component),v=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"drawer"},n.a.createElement("div",{className:this.props.isOpen?"drawer-title-black":"drawer-title",onClick:function(){return e.props.togglePanel()}},n.a.createElement("label",{className:"drawer-date-text"},this.props.title)),this.props.isOpen?n.a.createElement("div",{className:"options"},n.a.createElement("ul",{className:"option-list"},this.props.listItems.map((function(t){return n.a.createElement(h,Object.assign({handleCheckChildElement:function(){return e.props.handler(t.name,e.props.field)}},t))})))):null)}}]),a}(n.a.Component),b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"drawer"},n.a.createElement("div",{className:this.props.isOpen?"drawer-title-black":"drawer-title",onClick:function(){return e.props.togglePanel()}},n.a.createElement("label",{className:"drawer-date-text"},this.props.title)),this.props.isOpen?n.a.createElement("div",{className:"report-options"},n.a.createElement("ul",{className:"option-list"},Object.keys(this.props.reportChoices).map((function(t){return n.a.createElement("li",{className:"option-list-item",onClick:function(){return e.props.handler(t)}},n.a.createElement("div",{className:"item-text"},n.a.createElement("label",null,t)))})))):null)}}]),a}(n.a.Component),O=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={unit:"",unitMeasure:"",unitType:"",entries:[],name:"",dates:{start:"2015-01-01",end:"2019-12-01"},report:"debtServiceRatio",reportChoices:{"USD Debt":"debtSecurities","Debt Service Ratio":"debtServiceRatio","Total Credit":"totalCredit","Dollar Credit":"dollarCredit"},reportIsOpen:!1,structure:{debtSecurities:{URL:function(e,t){return"https://stats.bis.org/sdmx/data/BIS,WEBSTATS_DEBTSEC_DATAFLOW,1.0/..3P.1+2+7+B+E+G+I+J+K+S.1.C..A.USD.A.A.A...I?locale=*&format=sdmx-json&startPeriod="+e+"&endPeriod="+t+"&includeMetadata=true&dimensionAtObservation=AllDimensions&includeAllAnnotations=true"},params:{issuer:{options:[],isOpen:!1,title:"Issuer Type",jsonCode:"ISSUER_BUS_IMM",longName:"Issuer sector - immediate borrower"},country:{options:[],isOpen:!1,title:"Issuer Country",jsonCode:"ISSUER_RES",longName:"Issuer residence"}},axisFields:{xName:"end",yName:"value"},title:"Dollar-Denominated Non-Resident Debt Securities"},debtServiceRatio:{URL:function(e,t){return"https://stats.bis.org/sdmx/data/BIS,WEBSTATS_DSR_DATAFLOW,1.0/.AU+BE+BR+CA+CH+CN+CZ+DE+DK+ES+FI+FR+GB+HK+HU+ID+IN+IT+JP+KR+MX+MY+NL+NO+PL+PT+RU+SE+TH+TR+US+ZA.H+N+P?locale=*&format=sdmx-json&startPeriod="+e+"&endPeriod="+t+"&includeMetadata=true&dimensionAtObservation=AllDimensions&includeAllAnnotations=true"},params:{borrowerType:{options:[],isOpen:!1,title:"Borrower Type",jsonCode:"DSR_BORROWERS",longName:"Borrowers"},country:{options:[],isOpen:!1,title:"Borrower Country",jsonCode:"BORROWERS_CTY",longName:"Borrowers' country"}},axisFields:{xName:"end",yName:"value"},title:"Debt Service Ratio"},totalCredit:{URL:function(e,t){return"https://stats.bis.org/sdmx/data/BIS,WEBSTATS_TOTAL_CREDIT_DATAFLOW,2.0/.4T+5A+5R+AR+AT+AU+BE+BR+CA+CH+CL+CN+CO+CZ+DE+DK+ES+FI+FR+G2+GB+GR+HK+HU+ID+IE+IL+IN+IT+JP+KR+LU+MX+MY+NL+NO+NZ+PL+PT+RU+SA+SE+SG+TH+TR+US+XM+ZA.C+G+H+N+P.A.M+N.770.A?locale=*&format=sdmx-json&startPeriod="+e+"&endPeriod="+t+"&includeMetadata=true&dimensionAtObservation=AllDimensions&includeAllAnnotations=true"},params:{borrowerType:{options:[],isOpen:!1,title:"Borrower Type",jsonCode:"TC_BORROWERS",longName:"Borrowing sector"},valuation:{options:[],isOpen:!1,title:"Valuation",jsonCode:"VALUATION",longName:"Valuation"},country:{options:[],isOpen:!1,title:"Borrower Country",jsonCode:"BORROWERS_CTY",longName:"Borrowers' country"}},axisFields:{xName:"end",yName:"value"},title:"Total Credit"},dollarCredit:{URL:function(e,t){return"https://stats.bis.org/sdmx/data/BIS,WEBSTATS_GLI_DATAFLOW,1.0/.USD.2A+2R+3C+3P+4T+4U+4W+4Y+5C+5J+6E+AR+BR+CL+CN+ID+IN+JP+KR+MX+MY+RU+SA+TR+TW+US+ZA.N.A.I.B.USD?locale=*&format=sdmx-json&startPeriod="+e+"&endPeriod="+t+"&includeMetadata=true&dimensionAtObservation=AllDimensions&includeAllAnnotations=true"},params:{country:{options:[],isOpen:!1,title:"Borrower Country",jsonCode:"BORROWERS_CTY",longName:"Borrowers' country"}},axisFields:{xName:"end",yName:"value"},title:"Total Dollar Credit"}}},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getObservations()}},{key:"handleCheckChildElement",value:function(e,t){var a=this.state.structure;a[this.state.report].params[t].options.forEach((function(t){t.name===e&&(t.isChecked=!t.isChecked)})),this.setState({structure:a})}},{key:"handleSelectReport",value:function(e){this.setState({report:this.state.reportChoices[e]},this.getObservations)}},{key:"togglePanel",value:function(e){var t=this,a=this.state.structure;Object.keys(a[this.state.report].params).map((function(r){r!=e&&(a[t.state.report].params[r].isOpen=!1)})),a[this.state.report].params[e].isOpen=!a[this.state.report].params[e].isOpen,this.setState({structure:a})}},{key:"toggleReportlist",value:function(){this.setState({reportIsOpen:!this.state.reportIsOpen})}},{key:"handleDateChange",value:function(e){var t=this.state.dates;t[e.target.name]=e.target.value,this.setState({dates:t})}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.structure[this.state.report].params).map((function(t){return n.a.createElement(v,{title:e.state.structure[e.state.report].params[t].title,isOpen:e.state.structure[e.state.report].params[t].isOpen,listItems:e.state.structure[e.state.report].params[t].options,field:t,handler:function(t,a){return e.handleCheckChildElement(t,a)},togglePanel:function(){return e.togglePanel(t)}})}));return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"dash-panel"},n.a.createElement("div",{className:"graph-options"},n.a.createElement(b,{title:"Report",isOpen:this.state.reportIsOpen,reportChoices:this.state.reportChoices,handler:function(t){return e.handleSelectReport(t)},togglePanel:function(){return e.toggleReportlist()}}),n.a.createElement(f,{start:this.state.dates.start,end:this.state.dates.end,handleDateChange:function(t){return e.handleDateChange(t)},handleDateSubmit:function(){return e.getObservations(!0)}}),n.a.createElement("div",{className:"cabinet"},t)),n.a.createElement(m,{name:this.state.structure[this.state.report].title,data:this.state.entries,axisFields:this.state.structure[this.state.report].axisFields,params:this.state.structure[this.state.report].params,unit:this.state.unit,unitMeasure:this.state.unitMeasure,unitType:this.state.unitType,size:[500,500]})))}},{key:"getObservations",value:function(e){var t=this,a=this.state.structure[this.state.report].URL(this.state.dates.start,this.state.dates.end);fetch("https://cors-anywhere.herokuapp.com/"+a,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){console.log(a);var r=a.structure.name,n=a.dataSets[0].observations,s=a.structure.dimensions.observation,i=a.structure.attributes.dataset.concat(a.structure.attributes.observation).concat(a.structure.dimensions.dataset).concat(a.structure.dimensions.observation),o=i.filter((function(e){return"UNIT_MULT"==e.id}))[0].values[0].name,l=i.filter((function(e){return"UNIT_MEASURE"==e.id}))[0].values[0].name,c="";i.some((function(e){return"UNIT_TYPE"==e.id}))&&(c=i.filter((function(e){return"UNIT_TYPE"==e.id}))[0].values[0].name);var u={};Object.keys(t.state.structure[t.state.report].params).map((function(e){var a=t.state.structure[t.state.report].params[e].jsonCode;u[e]=s.filter((function(e){return e.id==a}))[0].values.map((function(e){var t=Object.assign({},e);return t.isChecked=!1,t})).sort((function(e,t){var a=e.name.toUpperCase(),r=t.name.toUpperCase();return a<r?-1:a>r?1:0}))}));var p=[];Object.keys(n).map((function(e){var t={};e.split(":").map((function(e,a){t[s[a].name]=s[a].values[e].name,"Time period or range"==s[a].name&&(t.start=new Date(s[a].values[e].start),t.end=new Date(s[a].values[e].end))})),t.value=parseFloat(n[e]),p=p.concat([t])})),p=p.sort((function(e,t){return e.end-t.end}));var d={};if(1==e)d={entries:p};else{var m=t.state.structure;Object.keys(m[t.state.report].params).map((function(e){m[t.state.report].params[e].options=u[e]})),d={name:r,unit:o,unitMeasure:l,unitType:c,entries:p,structure:m}}t.setState(d)}))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.70164e0a.chunk.js.map